function OnReady(e){var n=this;this.then=function(e,n){this.onOk=e,this.onError=n},this.catch=function(e){this.onError=e},e(function(e){n.onOk(e)},function(){n.onError()})}function Viewi(){var e=this,n={},t={},o={},i=/^\s*|\s*$/g,r=/;$/g,a={onViewiUrlChange:null};"img,embed,object,link,script,audio,video,style".split(",").each(function(e){o[e]=!0});var s=[],d=new Router;this.componentsUrl=VIEWI_PATH+"/components.json"+VIEWI_VERSION,this.components={};var c=document.createElement("a"),l=!1,u=function(e){return c.href=e,c.pathname},p=function(){for(var e in o)for(var n=document.getElementsByTagName(e),t=0;t<n.length;t++)s.push(n[t])},f=function(){e.components._meta.tags.split(",").each(function(e){n[e]=!0}),e.components._meta.boolean.split(",").each(function(e){t[e]=!0}),e.components._routes.each(function(e){d.register(e.method,e.url,e.component)}),p(),l=!0,e.go(location.href,!1)};this.start=function(){"undefined"!=typeof onViewiUrlChange&&"function"==typeof onViewiUrlChange&&(a.onViewiUrlChange=onViewiUrlChange),"undefined"!=typeof ViewiPages?(e.components=ViewiPages,f()):ajax.get(this.componentsUrl).then(function(n){e.components=n,f()}),document.addEventListener("click",function(n){n=n||window.event;var t=n.target||n.srcElement,o=t;"A"===o.parentNode.tagName&&(o=o.parentNode),"A"===o.tagName&&o.href&&0===o.href.indexOf(location.origin)&&(u(o.href),c.hash&&c.pathname===location.pathname||(n.preventDefault(),e.go(o.href,!0),c.hash&&c.click()))},!1),window.addEventListener("popstate",function(n){n.state?e.go(n.state.href,!1):e.go(location.href,!1)})},this.go=function(n,t){var o=u(n);a.onViewiUrlChange&&a.onViewiUrlChange(o);var i=d.resolve(o);if(null==i)throw"Can't resolve route for uri: "+o;t&&window.history.pushState({href:n},"",n),e.render(i.item.action,i.params)};var h=[],m=function(n,t){var o=arguments.length>2&&arguments[2],a=arguments.length>3&&arguments[3];if(n.expression){var s={call:!0,instance:t},d=["_component","app"];return(o||n.setter)&&d.push("event"),d=d.concat(h),n.code=n.code.replace(i,""),n.code=n.code.replace(r,""),n.setter?d.push(n.isChecked?"if(Array.isArray("+n.code+")) {  if ("+n.code+".indexOf(event.target.value) === -1) { event.target.checked && "+n.code+".push(event.target.value);event.target.checked && notify("+n.code+");  } else { !event.target.checked && "+n.code+".splice("+n.code+".indexOf(event.target.value), 1);!event.target.checked && notify("+n.code+");  }  } else { "+n.code+" = event.target.checked; } ":n.isMultiple?n.code+" = Array.prototype.slice.call(event.target.options).where(function(x){ return x.selected; }).select(function(x){ return x.value; });":n.code+" = event.target.value;"):n.raw||a?d.push("return "+n.code+";"):d.push("return app.htmlentities("+n.code+");"),s.code=n.code,s.func=Function.apply(null,d),s}return{call:!1,content:n.raw?n.content:e.decode(n.content)}},v=["template"],N=["if","else-if","else","foreach"],b=["if","else-if","else"],y=[],g=function(e,n){var t=arguments.length>2&&arguments[2],o=arguments.length>3?arguments[3]:null,i=arguments.length>4&&arguments[4],r=e.children,a=[],s=!1,d=null,c={};for(var l in r){var u=r[l];if("tag"!==u.type||"slot"!==u.content)if(!u.raw&&s&&"text"===u.type&&"text"===s.type||"comment"===u.type&&"comment"===s.type){if(s.contents.push(m(u,n)),u.subs)for(var p in u.subs)$(s,u.subs[p])}else{var f=null;u.attributes&&(f=u.attributes.first(function(e){return-1!==N.indexOf(e.content)&&-1===y.indexOf(e.content)}));var x=!1;if(s={id:++k,type:u.type,contents:[m(u,n)],domNode:null,parent:o,instance:n,previousNode:d},u.raw&&(s.type="raw",s.isVirtual=!0),o&&o.condition&&(s.condition=o.condition),d&&(d.nextNode=s),d=s,"tag"===u.type&&u.expression&&(s.type="dynamic",s.componentChilds=u.children,s.isVirtual=!0),null===f&&"tag"===u.type&&-1!==v.indexOf(u.content)){var w=u.content;s.type=w,s.isVirtual=!0}if(o&&o.scope&&(s.scope=o.scope),null===f){if(y.length>0&&(y=[]),"component"===u.type&&(x=u.content),u.subs)for(var p in u.subs)$(s,u.subs[p]);if(childNodes=!1,u.children&&(childNodes=g(u,n,t,s)),u.attributes&&(s.attributes=u.attributes.where(function(e){return-1===N.indexOf(e.content)}).select(function(e){var t={},o=!e.expression&&"("===e.content[0];if(t.content=e.content,t.isAttribute=!0,t.parent=s,t.contentExpression=m(e,n),t.instance=s.instance,e.dynamic&&(t.dynamic=e.dynamic),s.scope&&(t.scope=s.scope),e.children&&(t.children=e.children.select(function(i){var r={},a="model"===e.content;if(r.contentExpression=m(i,n,o,a),"dynamic"!==s.type&&"component"!==s.type||(r.propExpression=m(i,n,null,!0),i.subs&&(r.subs=i.subs)),r.content=i.content,i.subs&&!o)for(var d in i.subs)$(t,i.subs[d]);return r})),e.subs&&!o)for(var i in e.subs)$(t,e.subs[i]);return t})),x){var E=!1;i&&(ae=!0,E=!0);var V=ne(x,childNodes,s.attributes);E&&(ae=!1);var C=[];for(var O in V){R=a.length>0?a[a.length-1]:null,H=[];V[O].each(function(e){!R||"text"!==R.type||"text"!==e.type||e.raw||R.raw?(e.nextNode=null,e.parent=o,e.previousNode=R,R&&(R.nextNode=e),R=e,H.push(e)):R.contents=R.contents.concat(e.contents)}),C.push(H)}for(var P in C)a=a.concat(C[P]);d=a.length>0?a[a.length-1]:null}else childNodes&&("dynamic"===s.type||"raw"===s.type?s.itemChilds=childNodes:s.children=childNodes),a.push(s)}else{if(s.type=f.content,"if"===s.type&&(c={}),s.isVirtual=!0,y.push(f.content),-1!==b.indexOf(s.type)){for(var p in s.condition=f.children?m(f.children[0],n):{},c)$(s,p);if(f.children&&f.children[0].subs)for(var p in f.children[0].subs)$(s,f.children[0].subs[p]),c[f.children[0].subs[p]]=!0}var _=!1;if("foreach"===s.type&&f.children){for(var p in _=f.children[0],_.subs)$(s,_.subs[p]);s.forExpression={};var arguments=["_component","app"].concat(h);arguments.push("return "+_.forData+";"),s.forExpression.data=Function.apply(null,arguments),s.forExpression.key=_.forKey,s.forExpression.value=_.forItem,h.push(_.forKey),h.push(_.forItem),s.scope={stack:h.slice(),data:{}}}if(s.children=g({children:[u]},n,t,s),_){var j=h.indexOf(_.forKey);j>-1&&h.splice(j,1),j=h.indexOf(_.forItem),j>-1&&h.splice(j,1)}a.push(s)}}else{!0;var A=u.attributes&&u.attributes.first(function(e){return"name"===e.content}),T=0,I=function(e){return!e.attributes};A&&(T=A.children[0].content,I=function(e){return e.attributes&&e.attributes.first(function(e){return"name"===e.content&&e.children[0].content===T})});var S=!0;if(t){if(0===T){var L=t.where(function(e){return"tag"!==e.type||"slotContent"!==e.contents[0].content});if(L.length>0){S=!1;var R=a.length>0?a[a.length-1]:null,H=[];L.each(function(e){!R||"text"!==R.type||"text"!==e.type||e.raw||R.raw?(e.nextNode=null,e.parent=o,e.previousNode=R,R&&(R.nextNode=e),R=e,H.push(e)):R.contents=R.contents.concat(e.contents)}),a=a.concat(H)}}else{var B=t.first(function(e){return"tag"===e.type&&"slotContent"===e.contents[0].content&&I(e)});if(B){S=!1;var R=a.length>0?a[a.length-1]:null,H=[];B.children.each(function(e){!R||"text"!==R.type||"text"!==e.type||e.raw||R.raw?(e.nextNode=null,e.parent=o,e.previousNode=R,R&&(R.nextNode=e),R=e,H.push(e)):R.contents=R.contents.concat(e.contents)}),a=a.concat(H)}}d=a.length>0?a[a.length-1]:null}if(S){var M=g(u,n,!1,o);R=a.length>0?a[a.length-1]:null,H=[];M.each(function(e){!R||"text"!==R.type||"text"!==e.type||e.raw||R.raw?(e.nextNode=null,e.parent=o,e.previousNode=R,R&&(R.nextNode=e),R=e,H.push(e)):R.contents=R.contents.concat(e.contents)}),a=a.concat(H),d=a.length>0?a[a.length-1]:null}}}return a},x=function(n){var t=Y(n.name,n.params,n.__id);if(t.__beforeMount&&t.__beforeMount(),n.attributes)for(var o in n.attributes){var i=n.attributes[o];if(i.content in t){var r=null,a=null;for(var s in i.children){var d=i.children[s].propExpression;if(d.call){i.instance.component||(i.instance.component=x(i.instance));var c=[i.instance.component,e];if(i.scope)for(var l in i.scope.stack)c.push(i.scope.data[i.scope.stack[l]]);a=d.func.apply(null,c),i.children[s].subs&&(W["this."+i.content]={instance:i.instance,subs:i.children[s].subs})}else a=d.content;s>0?r+=a:r=a}"true"===r?r=!0:"false"===r?r=!1:"string"!=typeof r||isNaN(r)||(r=+r),t[i.content]=r}}return t},w=function(n,o,i){if(n)try{var r=o.content;if(o.contentExpression.call){o.instance.component||(o.instance.component=x(o.instance));var a=[o.instance.component,e];if(o.scope)for(var s in o.scope.stack)a.push(o.scope.data[o.scope.stack[s]]);if(r=o.contentExpression.func.apply(null,a),o.latestValue&&o.latestValue!==r&&(n.removeAttribute(o.latestValue),o.listeners&&o.latestValue in o.listeners)){var d=o.latestValue.substring(1,o.latestValue.length-1);n.removeEventListener(d,o.listeners[o.latestValue])}o.latestValue=r}if("("===r[0]){if(l&&!i)return;d=r.substring(1,r.length-1);var c=null;o.dynamic?(o.eventExpression||(o.instance.component||(o.instance.component=x(o.instance)),o.eventExpression=m(o.dynamic,o.instance,!0)),c=o.eventExpression.func):c=o.children[0].contentExpression.func,o.listeners||(o.listeners={}),o.listeners[r]&&n.removeEventListener(d,o.listeners[r]),o.listeners[r]=function(n){c(o.instance.component,e,n)},n.addEventListener(d,o.listeners[r])}else{if(i&&"model"!==r)return;var u=!1,p=!0;r in t&&(u=!0);var f=[];for(var h in o.children){var v=o.children[h].contentExpression;if(v.call){o.instance.component||(o.instance.component=x(o.instance));a=[o.instance.component,e];if(o.scope)for(var s in o.scope.stack)a.push(o.scope.data[o.scope.stack[s]]);p=v.func.apply(null,a),f.push(p)}else f.push(v.content)}if(u)return void(p?n.setAttribute(r,r):n.removeAttribute(r));var N="model"===r,b=f.join("");if(!N&&n.setAttribute(r,b),N){if(l&&!i)return;var y="checkbox"===n.getAttribute("type"),g="radio"===n.getAttribute("type"),w="SELECT"===n.tagName,E=w&&n.multiple,k=y||g;if(k||E||(n.value=b),g){var V=n.getAttribute("checked");n.value!=b&&V?(n.removeAttribute("checked"),n.checked=!1):n.value!=b||V||(n.setAttribute("checked","checked"),n.checked=!0)}d=k||w?"change":"input";if(o.listeners||(o.listeners={}),!o.valueExpression&&o.children.length>0){o.instance.component||(o.instance.component=x(o.instance)),o.valueExpression=m({code:o.children[0].contentExpression.code,expression:!0,setter:!0,isChecked:y,isMultiple:E},o.instance);c=o.valueExpression.func;o.listeners[d]=function(n){c(o.parent.instance.component,e,n)}}n.removeEventListener(d,o.listeners[d]),n.addEventListener(d,o.listeners[d])}}}catch(e){console.error(e),console.log(o.content)}},E=function(e){for(var n=e,t=!0,o=!1;!n.domNode||t;)if(t=!1,null!==n.previousNode){if(n=n.previousNode,o=!1,n.isVirtual){for(var i=n;null!==i&&!i.domNode;)i=i.isVirtual&&i.children?i.children[i.children.length-1]:null;i&&(n=i)}}else{if(null===n.parent)return null;n=n.parent,o=!0}return{itsParent:o,node:n}},k=0,V=function(t,i,r,a){if(!a&&(i.isVirtual||"text"===i.type)){for(var d=i;d.parent&&d.parent.isVirtual;)d=d.parent;for(var c=E(i),u=(c&&c.itsParent?c.node.domNode:c&&c.node.domNode.parentNode)||t,p=d;p.previousNode&&(p.previousNode.isVirtual||"text"===p.previousNode.type);)p=p.previousNode;for(var f=d;f.nextNode&&(f.nextNode.isVirtual||"text"===f.nextNode.type);)f=f.nextNode;if(p!==d||f!==d){for(var h=p,m=!0;m;)V(u,h,!0,!0),m=h!==f,h=h.nextNode;return}}if(r){var v=i.parent&&i.parent.condition,N=v&&v.value;if(v&&!N)return void I([i])}if(i.isVirtual||!i.condition||i.condition.value){i.instance.component||(i.instance.component=x(i.instance));var b=[];for(var y in i.contents){var g=i.contents[y];if(g.call){var k=[g.instance.component,e];if(i.scope)for(var C in i.scope.stack)k.push(i.scope.data[i.scope.stack[C]]);b.push(g.func.apply(null,k))}else b.push(g.content)}var S=b.join(""),L=!1,B=!1;if(i.skipIteration){i.skipIteration=!1;for(var M=i;M.isVirtual;)M=M.parent;L=M.domNode;var U=O.first(function(e,n){return e===L},!0);if(U&&U[0].parentNode&&(P[U[1]]=!0),i.refreshAttributes&&i.attributes)for(var D in i.refreshAttributes=!1,i.attributes)w(L,i.attributes[D])}else switch(i.type){case"text":if(t.doctype){L=t.doctype;break}var q=!1,W=E(i);if(r&&null==W)return;if(!q)if(W&&"text"==W.node.type)W.node.domNode.nodeValue+=S,null!==i.domNode&&(i.domNode.parentNode.removeChild(i.domNode),i.domNode=null);else if(null!==i.domNode&&i.domNode.parentNode===t)i.domNode.nodeValue=S,L=i.domNode;else{L=document.createTextNode(S);var $=W.node.domNode.nextSibling;W.itsParent||null===$?W.itsParent?W.node.domNode.childNodes.length>0?W.node.domNode.insertBefore(L,W.node.domNode.childNodes[0]):W.node.domNode.appendChild(L):W.node.domNode.parentNode.appendChild(L):$.parentNode.insertBefore(L,$),i.domNode=L}break;case"tag":if(t.documentElement){L=t.documentElement,i.domNode=L,P[0]=!0,P[1]=!0;break}if(!l&&S in o){var J=L=document.createElement(S);if(i.domNode=L,A(J,i.children,B,a),i.attributes)for(var D in i.attributes)w(J,i.attributes[D]);var K=O.first(function(e,n){return!(n in P)&&e.isEqualNode(J)},!0);if(K){P[K[1]]=!0,i.domNode=K[0];W=E(i),$=W.node.domNode.nextSibling;W.itsParent||null===$?W.itsParent?W.node.domNode.appendChild(K[0]):W.node.domNode.parentNode.appendChild(K[0]):$.parentNode.insertBefore(K[0],$);break}if(!K&&(K=s.first(function(e){return e.isEqualNode(J)}),K)){i.domNode=K;W=E(i),$=W.node.domNode.nextSibling;W.itsParent||null===$?W.itsParent?W.node.domNode.appendChild(K):W.node.domNode.parentNode.appendChild(K):$.parentNode.insertBefore(K,$);break}}if(!l&&"head"===S){var F=O.first(function(e){return e.nodeName.toLowerCase()===S},!0);L=F[0],P[F[1]]=!0,i.domNode=L;break}var X=_?O.first(function(e,n){return e.nodeName.toLowerCase()===S&&!(n in P)},!0):null;if(X&&X[0].parentNode){if(P[X[1]]=!0,j==X[1]){L=X[0],i.domNode=L;break}X[1]in P||X[0].parentNode.removeChild(X[0])}if(L=document.createElement(S),null!==i.domNode&&i.domNode.parentNode)i.domNode.parentNode.replaceChild(L,i.domNode),i.children&&I(i.children);else{W=E(i);if(null==W)return;$=W.node.domNode.nextSibling;W.itsParent||null===$?W.itsParent?W.node.domNode.childNodes.length>0?W.node.domNode.insertBefore(L,W.node.domNode.childNodes[0]):W.node.domNode.appendChild(L):W.node.domNode.parentNode.appendChild(L):$.parentNode.insertBefore(L,$)}if(i.domNode=L,S in o&&s.push(L),i.attributes)for(var D in i.attributes)w(L,i.attributes[D]);break;case"comment":if(L=document.createComment(S),null!==i.domNode)i.domNode.parentNode.replaceChild(L,i.domNode);else{W=E(i);if(null==W)return;$=W.node.domNode.nextSibling;W.itsParent||null===$?W.itsParent?W.node.domNode.childNodes.length>0?W.node.domNode.insertBefore(L,W.node.domNode.childNodes[0]):W.node.domNode.appendChild(L):W.node.domNode.parentNode.appendChild(L):$.parentNode.insertBefore(L,$)}i.domNode=L;break;case"if":i.instance.component||(i.instance.component=x(i.instance)),i.condition.value=i.condition.func(i.instance.component,e),L=t,i.parentDomNode=t,i.condition.previousValue=i.condition.value,i.topRealPreviousNode=i.parent.topRealPreviousNode||i.previousNode,B=!0;break;case"else-if":i.instance.component||(i.instance.component=x(i.instance)),i.condition.value=!i.previousNode.condition.value&&i.condition.func(i.instance.component,e),i.condition.previousValue=i.previousNode.condition.value||i.condition.value,L=t,i.parentDomNode=t,i.topRealPreviousNode=i.parent.topRealPreviousNode||i.previousNode,B=!0;break;case"else":i.condition.value=!i.previousNode.condition.previousValue,L=t,i.parentDomNode=t,i.topRealPreviousNode=i.parent.topRealPreviousNode||i.previousNode,B=!0;break;case"template":L=t,B=!0;break;case"foreach":if(L=t,B=!0,L){i.itemChilds||(i.itemChilds=i.children),I(i.children),i.children=null,i.instance.component||(i.instance.component=x(i.instance));k=[i.instance.component,e];var G=i.forExpression.data.apply(null,k);G&&G.length>0&&(i.children=[]);var z=null,Q=Array.isArray(G);for(var C in G){var Y={type:"template",isVirtual:!0,parent:i,previousNode:z,instance:Object.assign({},i.instance),domNode:null,scope:i.scope};Y.scope={parentScope:i.scope,data:{},stack:i.scope.stack},z&&(z.nextNode=Y),z=Y,Y.scope.data[i.forExpression.key]=Q?+C:C,Y.scope.data[i.forExpression.value]=G[C],R(Y,i.itemChilds),i.children.push(Y)}}break;case"dynamic":L=t,B=!0,I(i.children),i.children=null;Y={contents:i.contents,attributes:i.attributes,parent:i,previousNode:null,scope:i.scope,instance:i.instance,domNode:null};i.itemChilds&&H(Y,i.itemChilds),S in n?Y.type="tag":(Y.type="template",Y.isVirtual=!0,Y.children=ne(S,Y.children,i.attributes).main,Y.children.each(function(e){e.parent=Y})),i.children=[Y];break;case"raw":if(L=t,B=!0,i.latestHtml===S)return;i.latestHtml=S,i.rawNodes&&I(i.rawNodes),i.children=null,i.rawNodes=null;var Z=T(i);if(Z){var ee=document.createElement(Z.domNode.nodeName);if(ee.innerHTML=S,ee.childNodes.length>0){var te=0,oe=E(i);oe.itsParent||"text"!==oe.node.type||3!==ee.childNodes[0].nodeType||(oe.node.domNode.nodeValue+=ee.childNodes[0].nodeValue,te=1);for(var ie=[];te<ee.childNodes.length;te++)ie.push({domNode:ee.childNodes[te]});$=oe.node.domNode.nextSibling;if(ie.length>0){for(y=0;y<ie.length;y++)!oe.itsParent&&$?$.parentNode.insertBefore(ie[y].domNode,$):oe.itsParent?oe.node.domNode.appendChild(ie[y].domNode):oe.node.domNode.parentNode.appendChild(ie[y].domNode);var re=ie[ie.length-1];i.children=[{type:3===re.domNode.nodeType?"text":"tag",parent:i,previousNode:null,scope:i.scope,instance:i.instance,domNode:re.domNode}],i.rawNodes=ie}}}return;default:throw new Error("Node type '"+i.type+"' is not implemented.")}L&&A(L,i.children,B,a)}},C=null,O=[],P={},_=!1,j=0,A=function(e,n,t,o){var i=C,r=O,a=P;for(var s in C=e,_&&e!==i&&(O=Array.prototype.slice.call(C.childNodes),P={}),n){var d=O.first(function(e,t){return e===n[s].domNode},!0);d&&d[0].parentNode&&(P[d[1]]=!0)}for(var s in n)j=s,V(e,n[s],t,o);C=i,O=r,P=a},T=function(e){return e.parent?e.parent.domNode?e.parent:T(e.parent):null},I=function(e,n){for(var t in e)if(e[t].children&&I(e[t].children,n),e[t].domNode&&(e[t].domNode.parentNode&&e[t].domNode.parentNode.removeChild(e[t].domNode),e[t].domNode=null),e[t].skipIteration&&(e[t].skipIteration=!1),e[t].origin)for(var o in e[t].origin)e[t].origin[o].skipIteration=!1,e[t].origin[o].domNode=null,e[t].origin[o]=null},S={},L=!1,R=function(e,n){S={},L=!0,H(e,n),L=!1},H=function(e,n){var t=null,o=n.select(function(n){var o=B(e,n);return o.parent=e,o.previousNode=t,t=o,o.previousNode&&(o.previousNode.nextNode=o),o});e.children=o},B=function(e,n){var t=Object.assign({},n);if(t.nextNode=null,t.previousNode=null,t.domNode=null,t.scope=e.scope,L&&(t.instance.component||(t.instance.__id in S?t.instance=S[t.instance.__id]:(t.instance=Object.assign({},n.instance),S[t.instance.__id]=t.instance,t.instance.attributes=t.instance.attributes.select(function(e){var n=Object.assign({},e);return n.scope=t.scope,n}))),t.contents=t.contents.select(function(e){var n=Object.assign({},e);return n.call&&n.instance.__id===t.instance.__id&&(n.instance=t.instance),n}),t.attributes))for(var o in t.attributes)t.attributes[o].call&&(t.attributes[o].instance=t.instance);return n.children&&H(t,n.children),t},M=0,U=function(e,n){return"__id"in e||Object.defineProperty(e,"__id",{enumerable:!1,writable:!1,value:n||++M}),e.__id},D={},q={},W={},$=function(e,n){var t=e.isAttribute,o=t?e.parent.instance:e.instance,i=U(o);if(i in q||(q[i]={}),n in q[i]||(q[i][n]=[]),q[i][n].push(e),n in W){var r=W[n],a=r.instance,s=r.subs,d=U(a);for(var c in d in q||(q[d]={}),s){var l=s[c];l in q[d]||(q[d][l]=[]),q[d][l].push(e)}}},J=function(){for(var e in D)for(var n in D[e]){var t=D[e][n];t.isAttribute?w(t.parent.domNode,t):t.isVirtual?V(t.parentDomNode,t):V(t.domNode&&t.domNode.parentNode,t)}D={}},K=function(e){for(var n in e.subs){var t=e.subs[n],o=t.id;o in q&&t.path in q[o]&&(D[o+"_"+t.path]=q[o][t.path],setTimeout(function(){J()},0))}};this.notify=function(e,n){if(Array.isArray(e)){var t=Object.getPrototypeOf(e);t.deps&&K(t.deps)}};var F=function(e,n){var t=Object.getPrototypeOf(e);if(!("deps"in t)){var o={};return Object.defineProperty(o,"deps",{enumerable:!1,writable:!1,value:n}),Object.setPrototypeOf(o,t),Object.setPrototypeOf(e,o),e}for(var i in n)for(var r in i in e.deps||(e.deps[i]={}),n[i])e.deps[i][r]=n[i][r]},X=function(e){var n=arguments.length>1?arguments[1]:e,t=arguments.length>2?arguments[2]:"this",o=arguments.length>3?arguments[3]:{subs:{}};if(Array.isArray(e)){F(e,o);for(var i=0;i<e.length;i++)null!==e[i]&&"object"==typeof e[i]&&X(e[i],n,t+"[key]")}else{var r=Object.keys(e);for(i=0;i<r.length;i++)z(n,t+"."+r[i],e,r[i])}return e},G=null,z=function(e,n,t,o){G=null;var i=null,r=t[o],a=!1;if(G?i=G:(i={subs:{}},a=!0),null!==r&&"object"==typeof r&&X(r,e,n,i),"function"!=typeof r){var s=U(e);i.subs[s+n]={instance:e,id:s,path:n},a&&Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:function(){return G=i,r},set:function(t){t!==r&&(K(i),r=t,null!==r&&"object"==typeof r&&X(r,e,n,i))}})}},Q={},Y=function(n,t,o){var i=e.components[n],r=i.dependencies,a=i.service;if(a&&n in Q)return Q[n];if(!r){var s=new window[n];return i.init&&s.__init(),U(s,o),X(s),a&&(Q[n]=s),s}var arguments=[null];for(var d in r){var c=r[d],l=null;l=t&&c.argName in t?t[c.argName]:c.default?c.default:c.null?null:c.builtIn?"string"===c.name?"":0:Y(c.name),arguments.push(l)}s=i.init?new window[n]:new(window[n].bind.apply(window[n],arguments));return i.init&&(arguments.shift(),s.__init.apply(s,arguments)),U(s,o),X(s),a&&(Q[n]=s),s},Z=function(e,n){var t=e.length,o=n.length;if(t==o){for(l=0;l<t;l++)if(l<o){var i=!0,r=!1,a=e[l].contents&&e[l].contents.select(function(e){return e.content||e.code}).join(),s=n[l].contents&&n[l].contents.select(function(e){return e.content||e.code}).join();e[l].instance.name!=n[l].instance.name&&(i=!1),a!=s&&(i=!1);var d=e[l].attributes&&e[l].attributes.select(function(e){return(e.content||"")+(e.children&&";"+e.children.select(function(e){return e.contentExpression.content||e.contentExpression.code||""}).join(";")||"")}).join(";"),c=n[l].attributes&&n[l].attributes.select(function(e){return(e.content||"")+(e.children&&";"+e.children.select(function(e){return e.contentExpression.content||e.contentExpression.code||""}).join(";")||"")}).join(";");d!=c&&(i=!1),i||"dynamic"===e[l].type&&"dynamic"===n[l].type?(r=e[l].contents&&e[l].contents.first(function(e){return e.code}),e[l].domNode=n[l].domNode,e[l].skipIteration=!e[l].isVirtual&&!!n[l].domNode&&!r,e[l].skipIteration&&(n[l].origin||(n[l].origin={}),n[l].origin[e[l].id]=e[l],e[l].refreshAttributes=e[l].attributes&&e[l].attributes.first(function(e){return e.children&&e.children.first(function(e){return e.contentExpression.code})}),e[l].refreshAttributes&&e[l].attributes.each(function(e,t){e.latestValue=n[l].attributes[t].latestValue,e.listeners=n[l].attributes[t].listeners})),n[l].rawNodes&&(e[l].rawNodes=n[l].rawNodes,e[l].latestHtml=n[l].latestHtml),e[l].children&&n[l].children&&Z(e[l].children,n[l].children)):(n[l].domNode&&n[l].domNode.parentNode?n[l].domNode.parentNode.removeChild(n[l].domNode):n[l].isVirtual&&(e[l].previousNode&&"text"===e[l].previousNode.type&&e[l].previousNode.skipIteration&&(e[l].previousNode.skipIteration=!1,I([e[l].previousNode])),I(n[l].children)),e[l].children&&I(e[l].children),n[l].rawNodes&&(e[l].rawNodes=n[l].rawNodes,e[l].latestHtml=n[l].latestHtml))}}else{I(n);for(var l=0;l<t;l++)e[l].skipIteration&&(e[l].skipIteration=!1,e[l].domNode=null,e[l].children&&I(e[l].children,!0))}},ee=null,ne=function(n,t,o,i,r){if(!(n in e.components))throw new Error("Component "+n+" doesn't exist.");var a=null,s=null,d=oe.components.first(function(e){return e.name===n},!0);d&&(oe.components.splice(d[1],1),a=d[0].build,ae&&(s=d[0].instanceWrapper));var c=ee;ee=n;var l=e.components[n];s=s||{component:null,name:n,params:i,attributes:o,__id:++M};var u={};if(l.hasVersions)for(var p in l.versions)u.main=g(l.versions[p],s,t,null,r);else u.main=g(l.nodes,s,t,null,r);return a&&Z(u.main,a.main),ee=c,te.components.push({name:n,build:u,instanceWrapper:s}),u},te={name:null,nodes:null,components:[]},oe={name:null,nodes:null,components:[]},ie=function(e,n){if(e.children)for(var t in e.children)e.children[t].domNode?n.push(e.children[t]):e.children[t].isVirtual&&ie(e.children[t],n)},re=function(e,n){var t=e.domNode.nodeType===n.nodeType;if(t)if(3===e.domNode.nodeType||8==e.domNode.nodeType)t=e.domNode.nodeValue==n.nodeValue,t&&(e.domNode=n);else if(1===e.domNode.nodeType&&(t=e.domNode.nodeName==n.nodeName,t)){e.domNode;e.domNode=n;var o=0,i=0,r=n.childNodes.length,a=e.children?e.children.length:0;e.children&&(e.children[a-1].domNode&&3===e.children[a-1].domNode.nodeType&&(0==n.childNodes.length||3!==n.childNodes[r-1].nodeType)&&/^\s*$/.test(e.children[a-1].domNode.nodeValue)&&n.appendChild(e.children[a-1].domNode),e.children[0].domNode&&3===e.children[0].domNode.nodeType&&3!==n.childNodes[0].nodeType&&/^\s*$/.test(e.children[0].domNode.nodeValue)&&n.insertBefore(e.children[0].domNode,n.childNodes[0]),a=e.children.length,r=n.childNodes.length);for(var s=[],d=[],c=0;c<a;c++)e.children[c].rawNodes?d=d.concat(e.children[c].rawNodes):e.children[c].isVirtual?ie(e.children[c],d):d.push(e.children[c]);var l=d.length;for(c=0;c+i<r;c++){for(;c+o<l&&!d[c+o].domNode;)o++;if(c+o<l)if(d[c+o].type){var u=re(d[c+o],n.childNodes[c+i]);if(!u){for(var p=!1,f=c+i+1;f<r;f++)if(p=re(d[c+o],n.childNodes[f]),p){for(var h=c+i;h<f;h++)s.push(h);i+=f-(c+i);break}if(p)continue;e.domNode!==d[c+o].domNode.parentNode?(e.domNode.childNodes.length>c+i?e.domNode.replaceChild(d[c+o].domNode,e.domNode.childNodes[c+i]):e.domNode.appendChild(d[c+o].domNode),re(d[c+o],n.childNodes[c+i])):s.push(c)}}else d[c+o].domNode=n.childNodes[c+i];else s.push(c+i)}if(s.length>0)for(var m=s.length-1;m>=0;m--){var v=s[m];n.removeChild(n.childNodes[v])}if(r=n.childNodes.length,r>l)for(m=r-1;m>=l;m--)n.removeChild(n.childNodes[m]);if(l>r)for(m=r;m<l;m++)d[m].domNode&&!d[m].type&&n.appendChild(d[m].domNode);if(e.attributes)for(var N in e.attributes)w(e.domNode,e.attributes[N],!0)}return t},ae=!1,se=!1;this.render=function(e,n){if(!e)throw new Error("Component name is required.");if(!(e in this.components))throw new Error("Component "+e+" doesn't exist.");ae=!1,q={},ee=null,oe=te,te={},te.name=e,te.components=[];var t=ne(e,null,null,n,!0).main;te.nodes=t,se&&window.scrollTo(0,0),se=!0,_=!l;var o=l?{documentElement:document.createElement("html"),doctype:{}}:document;A(o,t,!1);var i=t[1];i||"dynamic"!==t[0].type||(i=t[0].children[0].children[1]),l&&re(i,document.documentElement),_=!1,l=!1},this.htmlentities=function(e){return e};var de=document.createElement("textarea");this.decode=function(e){return de.innerHTML=e,de.value}}var ajax={get:function(e){return new OnReady(function(n,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){var e=o.status;if(0===e||e>=200&&e<400){var i=o.getResponseHeader("Content-Type");0===i.indexOf("application/json")?n(JSON.parse(o.responseText)):n(o.responseText)}else t()}},o.open("GET",e,!0),o.send()})},post:function(e,n){return new OnReady(function(t,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){var e=i.status;if(0===e||e>=200&&e<400){var n=i.getResponseHeader("Content-Type");0===n.indexOf("application/json")?t(JSON.parse(i.responseText)):t(i.responseText)}else o()}},i.open("POST",e,!0),i.send(JSON.stringify(n))})}};Object.defineProperty(Array.prototype,"first",{enumerable:!1,value:function(e,n){for(var t in this){if(!e)return this[t];if(e(this[t],t))return n?[this[t],t]:this[t]}return null}}),Object.defineProperty(Array.prototype,"where",{enumerable:!1,value:function(e){var n=[];for(var t in this)e(this[t],t)&&n.push(this[t]);return n}}),Object.defineProperty(Array.prototype,"select",{enumerable:!1,value:function(e){var n=[];for(var t in this)n.push(e(this[t],t));return n}}),Object.defineProperty(Array.prototype,"each",{enumerable:!1,value:function(e){for(var n in this)e(this[n],n);return this}});var app=new Viewi,notify=app.notify;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){app.start()}):app.start();